{"version":3,"file":"index.js","mappings":"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","sources":["webpack://extra-blocks/./node_modules/@wordpress/icons/build-module/library/add-submenu.js","webpack://extra-blocks/./node_modules/@wordpress/icons/build-module/library/link.js","webpack://extra-blocks/./node_modules/@wordpress/icons/build-module/library/remove-submenu.js","webpack://extra-blocks/./navigation-submenu/edit.js","webpack://extra-blocks/./navigation-submenu/icons.js","webpack://extra-blocks/./navigation-submenu/save.js","webpack://extra-blocks/./navigation-submenu/transforms.js","webpack://extra-blocks/./node_modules/classnames/index.js","webpack://extra-blocks/./navigation-submenu/editor.scss","webpack://extra-blocks/external window \"lodash\"","webpack://extra-blocks/external window [\"wp\",\"a11y\"]","webpack://extra-blocks/external window [\"wp\",\"blockEditor\"]","webpack://extra-blocks/external window [\"wp\",\"blocks\"]","webpack://extra-blocks/external window [\"wp\",\"components\"]","webpack://extra-blocks/external window [\"wp\",\"coreData\"]","webpack://extra-blocks/external window [\"wp\",\"data\"]","webpack://extra-blocks/external window [\"wp\",\"dom\"]","webpack://extra-blocks/external window [\"wp\",\"element\"]","webpack://extra-blocks/external window [\"wp\",\"i18n\"]","webpack://extra-blocks/external window [\"wp\",\"keycodes\"]","webpack://extra-blocks/external window [\"wp\",\"primitives\"]","webpack://extra-blocks/external window [\"wp\",\"url\"]","webpack://extra-blocks/webpack/bootstrap","webpack://extra-blocks/webpack/runtime/compat get default export","webpack://extra-blocks/webpack/runtime/define property getters","webpack://extra-blocks/webpack/runtime/hasOwnProperty shorthand","webpack://extra-blocks/webpack/runtime/make namespace object","webpack://extra-blocks/./navigation-submenu/index.js"],"sourcesContent":["import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst addSubmenu = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  d: \"M2 12c0 3.6 2.4 5.5 6 5.5h.5V19l3-2.5-3-2.5v2H8c-2.5 0-4.5-1.5-4.5-4s2-4.5 4.5-4.5h3.5V6H8c-3.6 0-6 2.4-6 6zm19.5-1h-8v1.5h8V11zm0 5h-8v1.5h8V16zm0-10h-8v1.5h8V6z\"\n}));\nexport default addSubmenu;\n//# sourceMappingURL=add-submenu.js.map","import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst link = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  d: \"M15.6 7.2H14v1.5h1.6c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7H14v1.5h1.6c2.8 0 5.2-2.3 5.2-5.2 0-2.9-2.3-5.2-5.2-5.2zM4.7 12.4c0-2 1.7-3.7 3.7-3.7H10V7.2H8.4c-2.9 0-5.2 2.3-5.2 5.2 0 2.9 2.3 5.2 5.2 5.2H10v-1.5H8.4c-2 0-3.7-1.7-3.7-3.7zm4.6.9h5.3v-1.5H9.3v1.5z\"\n}));\nexport default link;\n//# sourceMappingURL=link.js.map","import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst removeSubmenu = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"m13.955 20.748 8-17.5-.91-.416L19.597 6H13.5v1.5h5.411l-1.6 3.5H13.5v1.5h3.126l-1.6 3.5H13.5l.028 1.5h.812l-1.295 2.832.91.416ZM17.675 16l-.686 1.5h4.539L21.5 16h-3.825Zm2.286-5-.686 1.5H21.5V11h-1.54ZM2 12c0 3.58 2.42 5.5 6 5.5h.5V19l3-2.5-3-2.5v2H8c-2.48 0-4.5-1.52-4.5-4S5.52 7.5 8 7.5h3.5V6H8c-3.58 0-6 2.42-6 6Z\"\n}));\nexport default removeSubmenu;\n//# sourceMappingURL=remove-submenu.js.map","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\nimport { escape, pull } from 'lodash';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n\tPanelBody,\r\n\tPopover,\r\n\tTextControl,\r\n\tTextareaControl,\r\n\tToolbarButton,\r\n\tToolbarGroup,\r\n\tToggleControl\r\n} from '@wordpress/components';\r\nimport { displayShortcut, isKeyboardEvent } from '@wordpress/keycodes';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport {\r\n\tBlockControls,\r\n\tInnerBlocks,\r\n\tuseInnerBlocksProps,\r\n\tInspectorControls,\r\n\tRichText,\r\n\t__experimentalLinkControl as LinkControl,\r\n\tuseBlockProps,\r\n\tstore as blockEditorStore,\r\n\tgetColorClassName,\r\n} from '@wordpress/block-editor';\r\nimport { isURL, prependHTTP, safeDecodeURI } from '@wordpress/url';\r\nimport {\r\n\tFragment,\r\n\tuseState,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tcreateInterpolateElement,\r\n} from '@wordpress/element';\r\nimport { placeCaretAtHorizontalEdge } from '@wordpress/dom';\r\nimport { link as linkIcon, removeSubmenu } from '@wordpress/icons';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { speak } from '@wordpress/a11y';\r\nimport { createBlock } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { ItemSubmenuIcon } from './icons';\r\nimport { name } from './block.json';\r\n\r\nconst ALLOWED_BLOCKS = ['kemet/navigation-link', 'kemet/navigation-submenu'];\r\n\r\nconst DEFAULT_BLOCK = {\r\n\tname: 'kemet/navigation-link',\r\n};\r\n\r\nconst MAX_NESTING = 5;\r\n\r\n/**\r\n * A React hook to determine if it's dragging within the target element.\r\n *\r\n * @typedef {import('@wordpress/element').RefObject} RefObject\r\n *\r\n * @param {RefObject<HTMLElement>} elementRef The target elementRef object.\r\n *\r\n * @return {boolean} Is dragging within the target element.\r\n */\r\nconst useIsDraggingWithin = (elementRef) => {\r\n\tconst [isDraggingWithin, setIsDraggingWithin] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst { ownerDocument } = elementRef.current;\r\n\r\n\t\tfunction handleDragStart(event) {\r\n\t\t\t// Check the first time when the dragging starts.\r\n\t\t\thandleDragEnter(event);\r\n\t\t}\r\n\r\n\t\t// Set to false whenever the user cancel the drag event by either releasing the mouse or press Escape.\r\n\t\tfunction handleDragEnd() {\r\n\t\t\tsetIsDraggingWithin(false);\r\n\t\t}\r\n\r\n\t\tfunction handleDragEnter(event) {\r\n\t\t\t// Check if the current target is inside the item element.\r\n\t\t\tif (elementRef.current.contains(event.target)) {\r\n\t\t\t\tsetIsDraggingWithin(true);\r\n\t\t\t} else {\r\n\t\t\t\tsetIsDraggingWithin(false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Bind these events to the document to catch all drag events.\r\n\t\t// Ideally, we can also use `event.relatedTarget`, but sadly that\r\n\t\t// doesn't work in Safari.\r\n\t\townerDocument.addEventListener('dragstart', handleDragStart);\r\n\t\townerDocument.addEventListener('dragend', handleDragEnd);\r\n\t\townerDocument.addEventListener('dragenter', handleDragEnter);\r\n\r\n\t\treturn () => {\r\n\t\t\townerDocument.removeEventListener('dragstart', handleDragStart);\r\n\t\t\townerDocument.removeEventListener('dragend', handleDragEnd);\r\n\t\t\townerDocument.removeEventListener('dragenter', handleDragEnter);\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn isDraggingWithin;\r\n};\r\n\r\n/**\r\n * Given the Link block's type attribute, return the query params to give to\r\n * /wp/v2/search.\r\n *\r\n * @param {string} type Link block's type attribute.\r\n * @param {string} kind Link block's entity of kind (post-type|taxonomy)\r\n * @return {{ type?: string, subtype?: string }} Search query params.\r\n */\r\nfunction getSuggestionsQuery(type, kind) {\r\n\tswitch (type) {\r\n\t\tcase 'post':\r\n\t\tcase 'page':\r\n\t\t\treturn { type: 'post', subtype: type };\r\n\t\tcase 'category':\r\n\t\t\treturn { type: 'term', subtype: 'category' };\r\n\t\tcase 'tag':\r\n\t\t\treturn { type: 'term', subtype: 'post_tag' };\r\n\t\tcase 'post_format':\r\n\t\t\treturn { type: 'post-format' };\r\n\t\tdefault:\r\n\t\t\tif (kind === 'taxonomy') {\r\n\t\t\t\treturn { type: 'term', subtype: type };\r\n\t\t\t}\r\n\t\t\tif (kind === 'post-type') {\r\n\t\t\t\treturn { type: 'post', subtype: type };\r\n\t\t\t}\r\n\t\t\treturn {};\r\n\t}\r\n}\r\n\r\n/**\r\n * Determine the colors for a menu.\r\n *\r\n * Order of priority is:\r\n * 1: Overlay custom colors (if submenu)\r\n * 2: Overlay theme colors (if submenu)\r\n * 3: Custom colors\r\n * 4: Theme colors\r\n * 5: Global styles\r\n *\r\n * @param {Object}  context\r\n * @param {boolean} isSubMenu\r\n */\r\nfunction getColors(context, isSubMenu) {\r\n\tconst {\r\n\t\ttextColor,\r\n\t\tcustomTextColor,\r\n\t\tbackgroundColor,\r\n\t\tcustomBackgroundColor,\r\n\t\toverlayTextColor,\r\n\t\tcustomOverlayTextColor,\r\n\t\toverlayBackgroundColor,\r\n\t\tcustomOverlayBackgroundColor,\r\n\t\tstyle,\r\n\t} = context;\r\n\r\n\tconst colors = {};\r\n\r\n\tif (isSubMenu && !!customOverlayTextColor) {\r\n\t\tcolors.customTextColor = customOverlayTextColor;\r\n\t} else if (isSubMenu && !!overlayTextColor) {\r\n\t\tcolors.textColor = overlayTextColor;\r\n\t} else if (!!customTextColor) {\r\n\t\tcolors.customTextColor = customTextColor;\r\n\t} else if (!!textColor) {\r\n\t\tcolors.textColor = textColor;\r\n\t} else if (!!style?.color?.text) {\r\n\t\tcolors.customTextColor = style.color.text;\r\n\t}\r\n\r\n\tif (isSubMenu && !!customOverlayBackgroundColor) {\r\n\t\tcolors.customBackgroundColor = customOverlayBackgroundColor;\r\n\t} else if (isSubMenu && !!overlayBackgroundColor) {\r\n\t\tcolors.backgroundColor = overlayBackgroundColor;\r\n\t} else if (!!customBackgroundColor) {\r\n\t\tcolors.customBackgroundColor = customBackgroundColor;\r\n\t} else if (!!backgroundColor) {\r\n\t\tcolors.backgroundColor = backgroundColor;\r\n\t} else if (!!style?.color?.background) {\r\n\t\tcolors.customTextColor = style.color.background;\r\n\t}\r\n\r\n\treturn colors;\r\n}\r\n\r\n/**\r\n * @typedef {'post-type'|'custom'|'taxonomy'|'post-type-archive'} WPNavigationLinkKind\r\n */\r\n\r\n/**\r\n * Navigation Link Block Attributes\r\n *\r\n * @typedef {Object} WPNavigationLinkBlockAttributes\r\n *\r\n * @property {string}               [label]         Link text.\r\n * @property {WPNavigationLinkKind} [kind]          Kind is used to differentiate between term and post ids to check post draft status.\r\n * @property {string}               [type]          The type such as post, page, tag, category and other custom types.\r\n * @property {string}               [rel]           The relationship of the linked URL.\r\n * @property {number}               [id]            A post or term id.\r\n * @property {boolean}              [opensInNewTab] Sets link target to _blank when true.\r\n * @property {string}               [url]           Link href.\r\n * @property {string}               [title]         Link title attribute.\r\n */\r\n\r\n/**\r\n * Link Control onChange handler that updates block attributes when a setting is changed.\r\n *\r\n * @param {Object}                          updatedValue    New block attributes to update.\r\n * @param {Function}                        setAttributes   Block attribute update function.\r\n * @param {WPNavigationLinkBlockAttributes} blockAttributes Current block attributes.\r\n *\r\n */\r\nexport const updateNavigationLinkBlockAttributes = (\r\n\tupdatedValue = {},\r\n\tsetAttributes,\r\n\tblockAttributes = {}\r\n) => {\r\n\tconst {\r\n\t\tlabel: originalLabel = '',\r\n\t\tkind: originalKind = '',\r\n\t\ttype: originalType = '',\r\n\t} = blockAttributes;\r\n\tconst {\r\n\t\ttitle = '',\r\n\t\turl = '',\r\n\t\topensInNewTab,\r\n\t\tid,\r\n\t\tkind: newKind = originalKind,\r\n\t\ttype: newType = originalType,\r\n\t} = updatedValue;\r\n\r\n\tconst normalizedTitle = title.replace(/http(s?):\\/\\//gi, '');\r\n\tconst normalizedURL = url.replace(/http(s?):\\/\\//gi, '');\r\n\tconst escapeTitle =\r\n\t\ttitle !== '' &&\r\n\t\tnormalizedTitle !== normalizedURL &&\r\n\t\toriginalLabel !== title;\r\n\tconst label = escapeTitle\r\n\t\t? escape(title)\r\n\t\t: originalLabel || escape(normalizedURL);\r\n\r\n\t// In https://github.com/WordPress/gutenberg/pull/24670 we decided to use \"tag\" in favor of \"post_tag\"\r\n\tconst type = newType === 'post_tag' ? 'tag' : newType.replace('-', '_');\r\n\r\n\tconst isBuiltInType =\r\n\t\t['post', 'page', 'tag', 'category'].indexOf(type) > -1;\r\n\r\n\tconst isCustomLink =\r\n\t\t(!newKind && !isBuiltInType) || newKind === 'custom';\r\n\tconst kind = isCustomLink ? 'custom' : newKind;\r\n\r\n\tsetAttributes({\r\n\t\t// Passed `url` may already be encoded. To prevent double encoding, decodeURI is executed to revert to the original string.\r\n\t\t...(url && { url: encodeURI(safeDecodeURI(url)) }),\r\n\t\t...(label && { label }),\r\n\t\t...(undefined !== opensInNewTab && { opensInNewTab }),\r\n\t\t...(id && Number.isInteger(id) && { id }),\r\n\t\t...(kind && { kind }),\r\n\t\t...(type && type !== 'URL' && { type }),\r\n\t});\r\n};\r\n\r\nexport default function NavigationSubmenuEdit({\r\n\tattributes,\r\n\tisSelected,\r\n\tsetAttributes,\r\n\tmergeBlocks,\r\n\tonReplace,\r\n\tcontext,\r\n\tclientId,\r\n}) {\r\n\tconst {\r\n\t\tlabel,\r\n\t\ttype,\r\n\t\topensInNewTab,\r\n\t\turl,\r\n\t\tdescription,\r\n\t\trel,\r\n\t\ttitle,\r\n\t\tkind,\r\n\t\tmegaMenu\r\n\t} = attributes;\r\n\tconst link = {\r\n\t\turl,\r\n\t\topensInNewTab,\r\n\t};\r\n\tconst { showSubmenuIcon, openSubmenusOnClick } = context;\r\n\tconst { saveEntityRecord } = useDispatch(coreStore);\r\n\r\n\tconst {\r\n\t\t__unstableMarkNextChangeAsNotPersistent,\r\n\t\treplaceBlock,\r\n\t} = useDispatch(blockEditorStore);\r\n\tconst [isLinkOpen, setIsLinkOpen] = useState(false);\r\n\tconst listItemRef = useRef(null);\r\n\tconst isDraggingWithin = useIsDraggingWithin(listItemRef);\r\n\tconst itemLabelPlaceholder = __('Add text…');\r\n\tconst ref = useRef();\r\n\r\n\tconst {\r\n\t\tisAtMaxNesting,\r\n\t\tisTopLevelItem,\r\n\t\tisParentOfSelectedBlock,\r\n\t\tisImmediateParentOfSelectedBlock,\r\n\t\thasDescendants,\r\n\t\tselectedBlockHasDescendants,\r\n\t\tuserCanCreatePages,\r\n\t\tuserCanCreatePosts,\r\n\t\tonlyDescendantIsEmptyLink,\r\n\t} = useSelect(\r\n\t\t(select) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetClientIdsOfDescendants,\r\n\t\t\t\thasSelectedInnerBlock,\r\n\t\t\t\tgetSelectedBlockClientId,\r\n\t\t\t\tgetBlockParentsByBlockName,\r\n\t\t\t\tgetBlock,\r\n\t\t\t} = select(blockEditorStore);\r\n\r\n\t\t\tlet _onlyDescendantIsEmptyLink;\r\n\r\n\t\t\tconst selectedBlockId = getSelectedBlockClientId();\r\n\r\n\t\t\tconst descendants = getClientIdsOfDescendants([clientId])\r\n\t\t\t\t.length;\r\n\r\n\t\t\tconst selectedBlockDescendants = getClientIdsOfDescendants([\r\n\t\t\t\tselectedBlockId,\r\n\t\t\t]);\r\n\r\n\t\t\t// Check for a single descendant in the submenu. If that block\r\n\t\t\t// is a link block in a \"placeholder\" state with no label then\r\n\t\t\t// we can consider as an \"empty\" link.\r\n\t\t\tif (selectedBlockDescendants?.length === 1) {\r\n\t\t\t\tconst singleBlock = getBlock(selectedBlockDescendants[0]);\r\n\r\n\t\t\t\t_onlyDescendantIsEmptyLink =\r\n\t\t\t\t\tsingleBlock?.name === 'kemet/navigation-link' &&\r\n\t\t\t\t\t!singleBlock?.attributes?.label;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tisAtMaxNesting:\r\n\t\t\t\t\tgetBlockParentsByBlockName(clientId, name).length >=\r\n\t\t\t\t\tMAX_NESTING,\r\n\t\t\t\tisTopLevelItem:\r\n\t\t\t\t\tgetBlockParentsByBlockName(clientId, name).length === 0,\r\n\t\t\t\tisParentOfSelectedBlock: hasSelectedInnerBlock(\r\n\t\t\t\t\tclientId,\r\n\t\t\t\t\ttrue\r\n\t\t\t\t),\r\n\t\t\t\tisImmediateParentOfSelectedBlock: hasSelectedInnerBlock(\r\n\t\t\t\t\tclientId,\r\n\t\t\t\t\tfalse\r\n\t\t\t\t),\r\n\t\t\t\thasDescendants: !!descendants,\r\n\t\t\t\tselectedBlockHasDescendants: !!selectedBlockDescendants?.length,\r\n\t\t\t\tuserCanCreatePages: select(coreStore).canUser(\r\n\t\t\t\t\t'create',\r\n\t\t\t\t\t'pages'\r\n\t\t\t\t),\r\n\t\t\t\tuserCanCreatePosts: select(coreStore).canUser(\r\n\t\t\t\t\t'create',\r\n\t\t\t\t\t'posts'\r\n\t\t\t\t),\r\n\t\t\t\tonlyDescendantIsEmptyLink: _onlyDescendantIsEmptyLink,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[clientId]\r\n\t);\r\n\r\n\t// Show the LinkControl on mount if the URL is empty\r\n\t// ( When adding a new menu item)\r\n\t// This can't be done in the useState call because it conflicts\r\n\t// with the autofocus behavior of the BlockListBlock component.\r\n\tuseEffect(() => {\r\n\t\tif (!openSubmenusOnClick && !url) {\r\n\t\t\tsetIsLinkOpen(true);\r\n\t\t}\r\n\t}, []);\r\n\r\n\t// Store the colors from context as attributes for rendering.\r\n\tuseEffect(() => {\r\n\t\t// This side-effect should not create an undo level as those should\r\n\t\t// only be created via user interactions. Mark this change as\r\n\t\t// not persistent to avoid undo level creation.\r\n\t\t// See https://github.com/WordPress/gutenberg/issues/34564.\r\n\t\t__unstableMarkNextChangeAsNotPersistent();\r\n\t\tsetAttributes({ isTopLevelItem });\r\n\t}, [isTopLevelItem]);\r\n\r\n\t/**\r\n\t * The hook shouldn't be necessary but due to a focus loss happening\r\n\t * when selecting a suggestion in the link popover, we force close on block unselection.\r\n\t */\r\n\tuseEffect(() => {\r\n\t\tif (!isSelected) {\r\n\t\t\tsetIsLinkOpen(false);\r\n\t\t}\r\n\t}, [isSelected]);\r\n\r\n\t// If the LinkControl popover is open and the URL has changed, close the LinkControl and focus the label text.\r\n\tuseEffect(() => {\r\n\t\tif (isLinkOpen && url) {\r\n\t\t\t// Does this look like a URL and have something TLD-ish?\r\n\t\t\tif (\r\n\t\t\t\tisURL(prependHTTP(label)) &&\r\n\t\t\t\t/^.+\\.[a-z]+/.test(label)\r\n\t\t\t) {\r\n\t\t\t\t// Focus and select the label text.\r\n\t\t\t\tselectLabelText();\r\n\t\t\t} else {\r\n\t\t\t\t// Focus it (but do not select).\r\n\t\t\t\tplaceCaretAtHorizontalEdge(ref.current, true);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [url]);\r\n\r\n\t/**\r\n\t * Focus the Link label text and select it.\r\n\t */\r\n\tfunction selectLabelText() {\r\n\t\tref.current.focus();\r\n\t\tconst { ownerDocument } = ref.current;\r\n\t\tconst { defaultView } = ownerDocument;\r\n\t\tconst selection = defaultView.getSelection();\r\n\t\tconst range = ownerDocument.createRange();\r\n\t\t// Get the range of the current ref contents so we can add this range to the selection.\r\n\t\trange.selectNodeContents(ref.current);\r\n\t\tselection.removeAllRanges();\r\n\t\tselection.addRange(range);\r\n\t}\r\n\r\n\tlet userCanCreate = false;\r\n\tif (!type || type === 'page') {\r\n\t\tuserCanCreate = userCanCreatePages;\r\n\t} else if (type === 'post') {\r\n\t\tuserCanCreate = userCanCreatePosts;\r\n\t}\r\n\r\n\tasync function handleCreate(pageTitle) {\r\n\t\tconst postType = type || 'page';\r\n\r\n\t\tconst page = await saveEntityRecord('postType', postType, {\r\n\t\t\ttitle: pageTitle,\r\n\t\t\tstatus: 'draft',\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\tid: page.id,\r\n\t\t\ttype: postType,\r\n\t\t\ttitle: page.title.rendered,\r\n\t\t\turl: page.link,\r\n\t\t\tkind: 'post-type',\r\n\t\t};\r\n\t}\r\n\r\n\tconst {\r\n\t\ttextColor,\r\n\t\tcustomTextColor,\r\n\t\tbackgroundColor,\r\n\t\tcustomBackgroundColor,\r\n\t} = getColors(context, !isTopLevelItem);\r\n\r\n\tfunction onKeyDown(event) {\r\n\t\tif (isKeyboardEvent.primary(event, 'k')) {\r\n\t\t\tsetIsLinkOpen(true);\r\n\t\t}\r\n\t}\r\n\r\n\tconst blockProps = useBlockProps({\r\n\t\tref: listItemRef,\r\n\t\tclassName: classnames('wp-block-navigation-item', {\r\n\t\t\t'is-editing': isSelected || isParentOfSelectedBlock,\r\n\t\t\t'is-dragging-within': isDraggingWithin,\r\n\t\t\t'has-link': !!url,\r\n\t\t\t'has-child': hasDescendants,\r\n\t\t\t'has-text-color': !!textColor || !!customTextColor,\r\n\t\t\t[getColorClassName('color', textColor)]: !!textColor,\r\n\t\t\t'has-background': !!backgroundColor || customBackgroundColor,\r\n\t\t\t[getColorClassName(\r\n\t\t\t\t'background-color',\r\n\t\t\t\tbackgroundColor\r\n\t\t\t)]: !!backgroundColor,\r\n\t\t\t'open-on-click': openSubmenusOnClick,\r\n\t\t}),\r\n\t\tstyle: {\r\n\t\t\tcolor: !textColor && customTextColor,\r\n\t\t\tbackgroundColor: !backgroundColor && customBackgroundColor,\r\n\t\t},\r\n\t\tonKeyDown,\r\n\t});\r\n\r\n\t// Always use overlay colors for submenus.\r\n\tconst innerBlocksColors = getColors(context, true);\r\n\r\n\tif (isAtMaxNesting) {\r\n\t\tpull(ALLOWED_BLOCKS, 'kemet/navigation-submenu');\r\n\t}\r\n\r\n\tconst innerBlocksProps = useInnerBlocksProps(\r\n\t\t{\r\n\t\t\tclassName: classnames('wp-block-navigation__submenu-container', {\r\n\t\t\t\t'is-parent-of-selected-block': isParentOfSelectedBlock,\r\n\t\t\t\t'has-text-color': !!(\r\n\t\t\t\t\tinnerBlocksColors.textColor ||\r\n\t\t\t\t\tinnerBlocksColors.customTextColor\r\n\t\t\t\t),\r\n\t\t\t\t[`has-${innerBlocksColors.textColor}-color`]: !!innerBlocksColors.textColor,\r\n\t\t\t\t'has-background': !!(\r\n\t\t\t\t\tinnerBlocksColors.backgroundColor ||\r\n\t\t\t\t\tinnerBlocksColors.customBackgroundColor\r\n\t\t\t\t),\r\n\t\t\t\t[`has-${innerBlocksColors.backgroundColor}-background-color`]: !!innerBlocksColors.backgroundColor,\r\n\t\t\t}),\r\n\t\t\tstyle: {\r\n\t\t\t\tcolor: innerBlocksColors.customTextColor,\r\n\t\t\t\tbackgroundColor: innerBlocksColors.customBackgroundColor,\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tallowedBlocks: ALLOWED_BLOCKS,\r\n\t\t\t__experimentalDefaultBlock: DEFAULT_BLOCK,\r\n\t\t\t__experimentalDirectInsert: true,\r\n\r\n\t\t\t// Ensure block toolbar is not too far removed from item\r\n\t\t\t// being edited.\r\n\t\t\t// see: https://github.com/WordPress/gutenberg/pull/34615.\r\n\t\t\t__experimentalCaptureToolbars: true,\r\n\r\n\t\t\trenderAppender:\r\n\t\t\t\tisSelected ||\r\n\t\t\t\t\t(isImmediateParentOfSelectedBlock &&\r\n\t\t\t\t\t\t!selectedBlockHasDescendants) ||\r\n\t\t\t\t\t// Show the appender while dragging to allow inserting element between item and the appender.\r\n\t\t\t\t\thasDescendants\r\n\t\t\t\t\t? InnerBlocks.ButtonBlockAppender\r\n\t\t\t\t\t: false,\r\n\t\t}\r\n\t);\r\n\r\n\tconst ParentElement = openSubmenusOnClick ? 'button' : 'a';\r\n\r\n\tfunction transformToLink() {\r\n\t\tconst newLinkBlock = createBlock('kemet/navigation-link', attributes);\r\n\t\treplaceBlock(clientId, newLinkBlock);\r\n\t}\r\n\r\n\tconst canConvertToLink =\r\n\t\t!selectedBlockHasDescendants || onlyDescendantIsEmptyLink;\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<BlockControls>\r\n\t\t\t\t<ToolbarGroup>\r\n\t\t\t\t\t{!openSubmenusOnClick && (\r\n\t\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\t\tname=\"link\"\r\n\t\t\t\t\t\t\ticon={linkIcon}\r\n\t\t\t\t\t\t\ttitle={__('Link')}\r\n\t\t\t\t\t\t\tshortcut={displayShortcut.primary('k')}\r\n\t\t\t\t\t\t\tonClick={() => setIsLinkOpen(true)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\tname=\"revert\"\r\n\t\t\t\t\t\ticon={removeSubmenu}\r\n\t\t\t\t\t\ttitle={__('Convert to Link')}\r\n\t\t\t\t\t\tonClick={transformToLink}\r\n\t\t\t\t\t\tclassName=\"wp-block-navigation__submenu__revert\"\r\n\t\t\t\t\t\tisDisabled={!canConvertToLink}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ToolbarGroup>\r\n\t\t\t</BlockControls>\r\n\t\t\t<InspectorControls>\r\n\t\t\t\t<PanelBody title={__('Mega Menu Settings')}>\r\n\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\tlabel={__(\"Enable Mega Menu\", 'premium-blocks-for-gutenberg')}\r\n\t\t\t\t\t\tchecked={megaMenu}\r\n\t\t\t\t\t\tonChange={check => setAttributes({ megaMenu: check })}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</PanelBody>\r\n\t\t\t\t<PanelBody title={__('Link settings 2')}>\r\n\t\t\t\t\t<TextareaControl\r\n\t\t\t\t\t\tvalue={description || ''}\r\n\t\t\t\t\t\tonChange={(descriptionValue) => {\r\n\t\t\t\t\t\t\tsetAttributes({\r\n\t\t\t\t\t\t\t\tdescription: descriptionValue,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tlabel={__('Description')}\r\n\t\t\t\t\t\thelp={__(\r\n\t\t\t\t\t\t\t'The description will be displayed in the menu if the current theme supports it.'\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\tvalue={title || ''}\r\n\t\t\t\t\t\tonChange={(titleValue) => {\r\n\t\t\t\t\t\t\tsetAttributes({ title: titleValue });\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tlabel={__('Link title')}\r\n\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\tvalue={rel || ''}\r\n\t\t\t\t\t\tonChange={(relValue) => {\r\n\t\t\t\t\t\t\tsetAttributes({ rel: relValue });\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tlabel={__('Link rel')}\r\n\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</PanelBody>\r\n\t\t\t</InspectorControls>\r\n\t\t\t<div {...blockProps}>\r\n\t\t\t\t{ /* eslint-disable jsx-a11y/anchor-is-valid */}\r\n\t\t\t\t<ParentElement className=\"wp-block-navigation-item__content\">\r\n\t\t\t\t\t{ /* eslint-enable */}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t<RichText\r\n\t\t\t\t\t\t\tref={ref}\r\n\t\t\t\t\t\t\tidentifier=\"label\"\r\n\t\t\t\t\t\t\tclassName=\"wp-block-navigation-item__label\"\r\n\t\t\t\t\t\t\tvalue={label}\r\n\t\t\t\t\t\t\tonChange={(labelValue) =>\r\n\t\t\t\t\t\t\t\tsetAttributes({ label: labelValue })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonMerge={mergeBlocks}\r\n\t\t\t\t\t\t\tonReplace={onReplace}\r\n\t\t\t\t\t\t\taria-label={__('Navigation link text')}\r\n\t\t\t\t\t\t\tplaceholder={itemLabelPlaceholder}\r\n\t\t\t\t\t\t\twithoutInteractiveFormatting\r\n\t\t\t\t\t\t\tallowedFormats={[\r\n\t\t\t\t\t\t\t\t'core/bold',\r\n\t\t\t\t\t\t\t\t'core/italic',\r\n\t\t\t\t\t\t\t\t'core/image',\r\n\t\t\t\t\t\t\t\t'core/strikethrough',\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tif (!openSubmenusOnClick && !url) {\r\n\t\t\t\t\t\t\t\t\tsetIsLinkOpen(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{!openSubmenusOnClick && isLinkOpen && (\r\n\t\t\t\t\t\t<Popover\r\n\t\t\t\t\t\t\tposition=\"bottom center\"\r\n\t\t\t\t\t\t\tonClose={() => setIsLinkOpen(false)}\r\n\t\t\t\t\t\t\tanchorRef={listItemRef.current}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<LinkControl\r\n\t\t\t\t\t\t\t\tclassName=\"wp-block-navigation-link__inline-link-input\"\r\n\t\t\t\t\t\t\t\tvalue={link}\r\n\t\t\t\t\t\t\t\tshowInitialSuggestions={true}\r\n\t\t\t\t\t\t\t\twithCreateSuggestion={userCanCreate}\r\n\t\t\t\t\t\t\t\tcreateSuggestion={handleCreate}\r\n\t\t\t\t\t\t\t\tcreateSuggestionButtonText={(searchTerm) => {\r\n\t\t\t\t\t\t\t\t\tlet format;\r\n\t\t\t\t\t\t\t\t\tif (type === 'post') {\r\n\t\t\t\t\t\t\t\t\t\t/* translators: %s: search term. */\r\n\t\t\t\t\t\t\t\t\t\tformat = __(\r\n\t\t\t\t\t\t\t\t\t\t\t'Create draft post: <mark>%s</mark>'\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t/* translators: %s: search term. */\r\n\t\t\t\t\t\t\t\t\t\tformat = __(\r\n\t\t\t\t\t\t\t\t\t\t\t'Create draft page: <mark>%s</mark>'\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn createInterpolateElement(\r\n\t\t\t\t\t\t\t\t\t\tsprintf(format, searchTerm),\r\n\t\t\t\t\t\t\t\t\t\t{ mark: <mark /> }\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tnoDirectEntry={!!type}\r\n\t\t\t\t\t\t\t\tnoURLSuggestion={!!type}\r\n\t\t\t\t\t\t\t\tsuggestionsQuery={getSuggestionsQuery(\r\n\t\t\t\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\t\t\t\tkind\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\tonChange={(updatedValue) =>\r\n\t\t\t\t\t\t\t\t\tupdateNavigationLinkBlockAttributes(\r\n\t\t\t\t\t\t\t\t\t\tupdatedValue,\r\n\t\t\t\t\t\t\t\t\t\tsetAttributes,\r\n\t\t\t\t\t\t\t\t\t\tattributes\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonRemove={() => {\r\n\t\t\t\t\t\t\t\t\tsetAttributes({ url: '' });\r\n\t\t\t\t\t\t\t\t\tspeak(__('Link removed.'), 'assertive');\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ParentElement>\r\n\t\t\t\t{(showSubmenuIcon || openSubmenusOnClick) && (\r\n\t\t\t\t\t<span className=\"wp-block-navigation__submenu-icon\">\r\n\t\t\t\t\t\t<ItemSubmenuIcon />\r\n\t\t\t\t\t</span>\r\n\t\t\t\t)}\r\n\t\t\t\t<div {...innerBlocksProps} />\r\n\t\t\t</div>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/components';\r\n\r\nexport const ItemSubmenuIcon = () => (\r\n\t<SVG\r\n\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\twidth=\"12\"\r\n\t\theight=\"12\"\r\n\t\tviewBox=\"0 0 12 12\"\r\n\t\tfill=\"none\"\r\n\t>\r\n\t\t<Path d=\"M1.50002 4L6.00002 8L10.5 4\" strokeWidth=\"1.5\" />\r\n\t</SVG>\r\n);\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { InnerBlocks } from '@wordpress/block-editor';\r\n\r\nexport default function save() {\r\n\treturn <InnerBlocks.Content />;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createBlock } from '@wordpress/blocks';\r\n\r\nconst transforms = {\r\n\tto: [\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tblocks: ['kemet/navigation-link'],\r\n\t\t\tisMatch: (attributes, block) => block?.innerBlocks?.length === 0,\r\n\t\t\ttransform: (attributes) =>\r\n\t\t\t\tcreateBlock('kemet/navigation-link', attributes),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tblocks: ['core/spacer'],\r\n\t\t\tisMatch: (attributes, block) => block?.innerBlocks?.length === 0,\r\n\t\t\ttransform: () => {\r\n\t\t\t\treturn createBlock('core/spacer');\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tblocks: ['core/site-logo'],\r\n\t\t\tisMatch: (attributes, block) => block?.innerBlocks?.length === 0,\r\n\t\t\ttransform: () => {\r\n\t\t\t\treturn createBlock('core/site-logo');\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tblocks: ['core/home-link'],\r\n\t\t\tisMatch: (attributes, block) => block?.innerBlocks?.length === 0,\r\n\t\t\ttransform: () => {\r\n\t\t\t\treturn createBlock('core/home-link');\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tblocks: ['core/social-links'],\r\n\t\t\tisMatch: (attributes, block) => block?.innerBlocks?.length === 0,\r\n\t\t\ttransform: () => {\r\n\t\t\t\treturn createBlock('core/social-links');\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tblocks: ['core/search'],\r\n\t\t\tisMatch: (attributes, block) => block?.innerBlocks?.length === 0,\r\n\t\t\ttransform: () => {\r\n\t\t\t\treturn createBlock('core/search');\r\n\t\t\t},\r\n\t\t},\r\n\t],\r\n};\r\n\r\nexport default transforms;\r\n","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"lodash\"];","module.exports = window[\"wp\"][\"a11y\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"dom\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"keycodes\"];","module.exports = window[\"wp\"][\"primitives\"];","module.exports = window[\"wp\"][\"url\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * WordPress dependencies\r\n */\r\nimport { addSubmenu } from '@wordpress/icons';\r\nimport { registerBlockType } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\n\r\nimport metadata from './block.json';\r\nimport edit from './edit';\r\nimport save from './save';\r\nimport transforms from './transforms';\r\nimport './editor.scss';\r\n\r\nconst { name } = metadata;\r\n\r\nexport { metadata, name };\r\n\r\nregisterBlockType(name, {\r\n\ticon: addSubmenu,\r\n\r\n\t__experimentalLabel: ({ label }) => label,\r\n\r\n\tedit,\r\n\r\n\tsave,\r\n\r\n\ttransforms,\r\n});\r\n"],"names":["classnames","escape","pull","useSelect","useDispatch","PanelBody","Popover","TextControl","TextareaControl","ToolbarButton","ToolbarGroup","ToggleControl","displayShortcut","isKeyboardEvent","__","sprintf","BlockControls","InnerBlocks","useInnerBlocksProps","InspectorControls","RichText","__experimentalLinkControl","LinkControl","useBlockProps","store","blockEditorStore","getColorClassName","isURL","prependHTTP","safeDecodeURI","Fragment","useState","useEffect","useRef","createInterpolateElement","placeCaretAtHorizontalEdge","link","linkIcon","removeSubmenu","coreStore","speak","createBlock","ItemSubmenuIcon","name","ALLOWED_BLOCKS","DEFAULT_BLOCK","MAX_NESTING","useIsDraggingWithin","elementRef","isDraggingWithin","setIsDraggingWithin","ownerDocument","current","handleDragStart","event","handleDragEnter","handleDragEnd","contains","target","addEventListener","removeEventListener","getSuggestionsQuery","type","kind","subtype","getColors","context","isSubMenu","textColor","customTextColor","backgroundColor","customBackgroundColor","overlayTextColor","customOverlayTextColor","overlayBackgroundColor","customOverlayBackgroundColor","style","colors","color","text","background","updateNavigationLinkBlockAttributes","updatedValue","setAttributes","blockAttributes","label","originalLabel","originalKind","originalType","title","url","opensInNewTab","id","newKind","newType","normalizedTitle","replace","normalizedURL","escapeTitle","isBuiltInType","indexOf","isCustomLink","encodeURI","undefined","Number","isInteger","NavigationSubmenuEdit","attributes","isSelected","mergeBlocks","onReplace","clientId","description","rel","megaMenu","showSubmenuIcon","openSubmenusOnClick","saveEntityRecord","__unstableMarkNextChangeAsNotPersistent","replaceBlock","isLinkOpen","setIsLinkOpen","listItemRef","itemLabelPlaceholder","ref","isAtMaxNesting","isTopLevelItem","isParentOfSelectedBlock","isImmediateParentOfSelectedBlock","hasDescendants","selectedBlockHasDescendants","userCanCreatePages","userCanCreatePosts","onlyDescendantIsEmptyLink","select","getClientIdsOfDescendants","hasSelectedInnerBlock","getSelectedBlockClientId","getBlockParentsByBlockName","getBlock","_onlyDescendantIsEmptyLink","selectedBlockId","descendants","length","selectedBlockDescendants","singleBlock","canUser","test","selectLabelText","focus","defaultView","selection","getSelection","range","createRange","selectNodeContents","removeAllRanges","addRange","userCanCreate","handleCreate","pageTitle","postType","page","status","rendered","onKeyDown","primary","blockProps","className","innerBlocksColors","innerBlocksProps","allowedBlocks","__experimentalDefaultBlock","__experimentalDirectInsert","__experimentalCaptureToolbars","renderAppender","ButtonBlockAppender","ParentElement","transformToLink","newLinkBlock","canConvertToLink","check","descriptionValue","titleValue","relValue","labelValue","searchTerm","format","mark","Path","SVG","save","transforms","to","blocks","isMatch","block","innerBlocks","transform","addSubmenu","registerBlockType","metadata","edit","icon","__experimentalLabel"],"sourceRoot":""}